<% content_for :with_direction_toggle, true %>



<% if @theme.image.attached? %>
  <div class="text-center mb-4">
    <%= image_tag @theme.display_image, class: "rounded" %>
    <p class="mt-2"><%= @theme.description %></p>
  </div>
<% end %>

<h2 class="text-center mb-4">このお題で詠まれた句 （<%= @posts.total_count %>件）</h2>

<% if @posts.any? %>
  <% @posts.each do |post| %>
    <div class="card mb-4">
      <%= link_to post_path(post), class: "text-decoration-none", data: { turbo: false } do %>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <span class="badge bg-primary"><%= post.tags.first&.name %></span>
            <small class="text-muted"><%= l post.created_at, format: :long %></small>
          </div>
          <%= render partial: 'posts/post_content', locals: { content: post.display_content } %>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="mt-4">
    <%= paginate @posts %>
  </div>
<% else %>
  <p class="text-center text-muted">まだ句が詠まれていません</p>
<% end %>

<div class="text-center mt-4">
  <%= link_to '戻る', 'javascript:history.back()', class: 'text-decoration-none' %>
</div>